name: MoCHAformer_rgb_stg2
model_type: MoCHAformer_stg2_model
num_gpu: 1  # set num_gpu: 0 for cpu mode
manual_seed: 0

datasets:
  test:
    name: MultiFrameVD
    type: MultiFrameVDPairedN2NRawDataset
    dataroot_gt: /code/datasets/RawVDemoire/demo/gt_rgb
    dataroot_lq: /code/datasets/RawVDemoire/demo/moire_raw
    io_backend:
      type: disk
    batch_size: 1
    num_worker: 8

# network structures
network_g:
  type: MoCHAformer_rgb
  stage: 2
  convnext_block_c: 3
  convnext_block_m: 3
  img_size: 128
  patch_size: 1
  in_chans: 4
  embed_dim: 96
  depths: [5,5,5,5]
  num_heads: [4,4,4,4]
  window_size: [2,7,7]
  mlp_ratio: 2
  qkv_bias: True
  qk_scale: False
  drop_rate: 0.
  attn_drop_rate: 0.
  drop_path_rate: 0.1
  ape: False
  patch_norm: True
  use_checkpoint: False
  upscale: 1
  img_range: 1.
  upsampler: 'pixelshuffle'
  downsample: True
  added_net: ['mpdm']


# path
path:
  pretrain_network_g: experiments/MoCHAformer_rgb_stg2/models/net_g_250000.pth
  strict_load_g: false
  param_key_g: 'params_ema'


# validation settings
val:
  save_img: true
  metrics:
    psnr:
      type: calculate_vd_psnr
    ssim:
      type: calculate_vd_ssim
    lpips:
      type: calculate_vd_lpips
